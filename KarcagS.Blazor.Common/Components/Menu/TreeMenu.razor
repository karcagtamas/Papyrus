@using Microsoft.AspNetCore.Components.Routing
@using Microsoft.Extensions.Localization

@foreach (var item in Items)
{
    @if (item.IsGroup)
    {
        <MudNavGroup Icon="@item.Icon" IconColor="@(item.IconColor ?? Color.Default)" Title="@GetTitle(item, Localizer)">
            <TreeMenu Items="@item.Children" Localizer="Localizer" />
        </MudNavGroup>
    }
    else
    {
        <MudNavLink Icon="@item.Icon" IconColor="@(item.IconColor ?? Color.Default)" Href="@item.Path" Match="NavLinkMatch.All">@GetTitle(item, Localizer)</MudNavLink>
    }
}

@code {
    [Parameter]
    public List<MenuItem> Items { get; set; } = new();

    [Parameter]
    public IStringLocalizer? Localizer { get; set; }

    private static string GetTitle(MenuItem item, IStringLocalizer? localizer)
    {
        if (ObjectHelper.IsNotNull(localizer) && ObjectHelper.IsNotNull(item.ResourceKey))
        {
            return localizer[item.ResourceKey];
        }

        return item.Title;
    }
}
