@using KarcagS.Shared.Helpers
@using KarcagS.Shared.Table
@using Papyrus.Client.Services.Notes.Interfaces
@inject IStringLocalizer<NoteActionLogDialog> L
@inject INoteActionLogTableService NoteActionLogTableService

<MudDialog ClassContent="d-flex flex-column flex-grow-1">
    <TitleContent><MudText Typo="Typo.h5" Color="Color.Primary">@L["Title"]</MudText></TitleContent>
    <DialogContent>
        <div class="d-flex" style="max-height: 84vh; overflow: hidden; padding: 1rem;">
            <Table TKey="long" Service="NoteActionLogTableService" InitialParams="ExtraParams" Localizer="L" />
        </div>
    </DialogContent>
    <DialogActions>
        <MudSpacer />
        <MudButton Color="Color.Primary" OnClick="@(() => Dialog.Close())">@L["Action.OK"]</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [Parameter]
    public string NoteId { get; set; } = default!;

    [CascadingParameter]
    private MudDialogInstance Dialog { get; set; } = null!;

    private Dictionary<string, object> ExtraParams { get; set; } = new();

    protected override void OnInitialized()
    {
        base.OnInitialized();

        ExtraParams = new Dictionary<string, object>
        {
            { "noteId", NoteId }
        };
    }
}
