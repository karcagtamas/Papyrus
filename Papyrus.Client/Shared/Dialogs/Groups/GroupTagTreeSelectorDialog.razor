@using Papyrus.Client.Services.Notes.Interfaces
@using Papyrus.Shared.DTOs.Groups
@using Papyrus.Shared.DTOs.Notes

<TreeSelectorDialog Data="GroupTagTreeItemDTO" EntityName="Tag" BodyText="Persist empty selection to choose ROOT path" Fetcher="@Fetcher" ItemExtractor="@ItemExctractor" TitleGetter="@TitleGetter" />

@code {
    [Parameter, EditorRequired]
    public int GroupId { get; set; }

    [Parameter]
    public int? ParentId { get; set; }

    [Inject]
    private ITagService TagService { get; set; } = default!;

    private Task<List<GroupTagTreeItemDTO>> Fetcher()
    {
        return TagService.GetTreeByGroup(GroupId, ParentId);
    }

    private List<GroupTagTreeItemDTO> ItemExctractor(GroupTagTreeItemDTO obj)
    {
        return obj.Children;
    }

    private string TitleGetter(GroupTagTreeItemDTO obj)
    {
        return obj.Caption;
    }
}