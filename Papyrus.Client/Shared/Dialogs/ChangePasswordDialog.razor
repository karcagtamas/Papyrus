@using Papyrus.Shared.Models
@using Services.Interfaces
@inject IStringLocalizer<ChangePasswordDialog> L

<EditorDialog Model="UserPasswordModel" ModelObj="Model" EntityName="@L["Entity"]" IsEdit="true" Submit="Submit" Title="@L["Title"]">
    <TextInput Class="mb-5" Label="@L["Field.OldPassword"]" IsPassword Required For="@(() => Model.OldPassword)" @bind-Value="Model.OldPassword" FullWidth />
    <TextInput Label="@L["Field.NewPassword"]" IsPassword Required For="@(() => Model.NewPassword)" @bind-Value="Model.NewPassword" FullWidth />
</EditorDialog>

@code {
    [Inject] private IUserService UserService { get; set; } = null!;

    private UserPasswordModel Model { get; set; } = new()
        {
            NewPassword = "",
            OldPassword = ""
        };

    private async Task<bool> Submit() => await UserService.UpdatePassword(Model);
}
