@using Papyrus.Shared.Models
@using Services.Interfaces
@inject IStringLocalizer<ChangePasswordDialog> L

<EditorDialog Model="UserPasswordModel" ModelObj="Model" EntityName="@L["Entity"]" IsEdit="true" Submit="Submit" Title="@L["Title"]">
    <MudTextField T="string" Label="@L["Field.OldPassword"]" Variant="Variant.Text" InputType="InputType.Password"
                  Required="true" For="@(() => Model.OldPassword)" @bind-Value="Model.OldPassword" FullWidth="true">
    </MudTextField>
    <MudTextField T="string" Label="@L["Field.NewPassword"]" Variant="Variant.Text" InputType="InputType.Password"
                  Required="true" For="@(() => Model.NewPassword)" @bind-Value="Model.NewPassword" FullWidth="true">
    </MudTextField>
</EditorDialog>

@code {
    [Inject] private IUserService UserService { get; set; } = null!;

    private UserPasswordModel Model { get; set; } = new()
        {
            NewPassword = "",
            OldPassword = ""
        };

    private async Task<bool> Submit() => await UserService.UpdatePassword(Model);
}