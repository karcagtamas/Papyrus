@using Papyrus.Shared.DTOs.Notes
@inject IStringLocalizer<TagTree> L

<MudCard Elevation="2">
    <MudTreeView T="TreeItem<TagTreeItemDTO>" Items="TreeItems">
        <ItemTemplate>
            <MudTreeViewItem @bind-Expanded="context.IsExpanded" Items="context.Items">
                <Content>
                    <MudTreeViewItemToggleButton @bind-Expanded="context.IsExpanded" Visible="context.HasChild" />
                    <div class="flex-box flex-row align-items-center">
                        <MudText Class="mr-1">@context.Data.Caption</MudText>
                        <MudTooltip Text="@L["ColorBox", context.Data.Color]">
                            <div style="@("background-color:" + context.Data.Color)" class="color-box"></div>
                        </MudTooltip>
                        @if (CreateEnabled)
                        {
                            <MudTooltip Text="@L["AddAction", context.Data.Caption]">
                                <MudIconButton Icon="@Icons.Filled.Add" Variant="Variant.Text" Size="Size.Small" OnClick="() => Create(context.Data.Id)" />
                            </MudTooltip>
                        }
                        <MudSpacer />
                        @if (!context.HasChild && RemoveEnabled)
                        {
                            <MudTooltip Text="@L["RemoveAction", context.Data.Caption]">
                                <MudIconButton Color="Color.Error" Icon="@Icons.Filled.Remove" Variant="Variant.Text" Size="Size.Small" OnClick="() => Remove(context.Data.Id)" />
                            </MudTooltip>
                        }
                        @if (EditEnabled)
                        {
                            <MudTooltip Text="@L["EditAction", context.Data.Caption]">
                                <MudIconButton Color="Color.Warning" Icon="@Icons.Filled.Edit" Variant="Variant.Text" Size="Size.Small" OnClick="() => Edit(context.Data.Id)" />
                            </MudTooltip>
                        }
                    </div>
                </Content>
            </MudTreeViewItem>
        </ItemTemplate>
    </MudTreeView>
</MudCard>